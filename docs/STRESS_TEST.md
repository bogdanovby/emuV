# Тестирование использования всей видеопамяти

## Нагрузочный тест (стресс-тест)

Для тестирования использования всей доступной VRAM (10 ГБ):

```bash
# Компиляция и запуск нагрузочного теста
sudo ./run_stress_test.sh

# Или с указанием размера (в ГБ)
sudo ./run_stress_test.sh 8
```

Этот тест:
- Заполняет всю доступную VRAM (10 ГБ)
- Использует несколько потоков для параллельного выделения памяти
- Проверяет целостность данных
- Показывает статистику использования в реальном времени

## Тест использования VRAM

Для тестирования реального использования памяти:

```bash
# Компиляция
gcc -o vram_usage_test vram_usage_test.c

# Запуск (заполнит 10 ГБ)
sudo ./vram_usage_test

# Или с указанием размера
sudo ./vram_usage_test 5  # 5 ГБ
```

## Мониторинг использования памяти

Во время теста можно мониторить использование:

```bash
# В другом терминале
watch -n 1 'free -h && echo "" && cat /sys/class/vgpu_nvidia/vgpu_nvidia/vram_info'
```

## Важные замечания

⚠️ **Внимание**: 
- Виртуальная VRAM использует системную RAM
- При выделении 10 ГБ может не хватить системной памяти
- Система может начать использовать swap, что замедлит работу
- Рекомендуется тестировать на системе с достаточным объемом RAM

## Рекомендации по тестированию

1. **Начните с малого**: Протестируйте с 1-2 ГБ перед использованием всего объема
2. **Мониторьте систему**: Следите за использованием памяти и swap
3. **Используйте нагрузочный тест**: `stress_test_vgpu` безопаснее для системы
4. **Тестируйте постепенно**: Увеличивайте нагрузку постепенно

